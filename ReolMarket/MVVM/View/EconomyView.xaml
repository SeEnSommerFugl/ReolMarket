<UserControl x:Class="ReolMarket.MVVM.View.EconomyView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             xmlns:sys="clr-namespace:System;assembly=mscorlib"
             mc:Ignorable="d"
             d:DesignWidth="1920" d:DesignHeight="1080"
             MaxWidth="1920" MaxHeight="1080"
             Background="Transparent">

    <UserControl.Resources>
        <!-- Mørk panelbaggrund (justér farven hvis du vil) -->
        <SolidColorBrush x:Key="CardBackground" Color="#162231" Opacity="0.92"/>
        <SolidColorBrush x:Key="CardBorder" Color="#0E1724" Opacity="0.92"/>

        <!-- TitleLeft alias til din eksisterende TitleLeft (TextBlock) -->

        <!-- TextBlock-udgave af InputRight (din globale er en TextBox-style) -->
        <Style x:Key="InputRight" TargetType="TextBlock">

            <Setter Property="TextAlignment" Value="Left"/>
            <Setter Property="Margin" Value="10,0,0,0"/>
            <Setter Property="VerticalAlignment" Value="Center"/>
            <Setter Property="FontSize" Value="30"/>
            <Setter Property="Foreground" Value="#D9E6FF"/>
        </Style>

        <!-- Genbrugelig “Card” til alle sektioner -->
        <Style x:Key="Card" TargetType="Border">
            <Setter Property="Background" Value="{StaticResource CardBackground}"/>
            <Setter Property="BorderBrush" Value="{StaticResource CardBorder}"/>
            <Setter Property="BorderThickness" Value="1"/>
            <Setter Property="CornerRadius" Value="16"/>
            <Setter Property="Padding" Value="16"/>
            <Setter Property="SnapsToDevicePixels" Value="True"/>
        </Style>
    </UserControl.Resources>

    <!-- Layout: 3 rækker x 2 kolonner. Mørke “cards” inde i grid’et. -->
    <Grid Background="Transparent" Margin="16">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <!-- top: Differencer -->
            <RowDefinition Height="Auto"/>
            <!-- midt: Nøgletal + Reol-tal -->
            <RowDefinition Height="Auto"/>
            <!-- bund: Salgs-tal -->
        </Grid.RowDefinitions>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="*"/>
            <ColumnDefinition Width="*"/>
        </Grid.ColumnDefinitions>

        <!-- GRID 1: Nøgletal -->
        <Border Grid.Column="0" Style="{StaticResource Card}" Margin="8">
            <Grid>
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="8"/>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                </Grid.RowDefinitions>

                <TextBlock Text="Nøgletal" Style="{StaticResource H2}" Foreground="#EAF2FF"/>

                <DockPanel Grid.Row="2" LastChildFill="True" Margin="0,2">
                    <TextBlock Text="Samlet indtægt:" Style="{StaticResource TitleLeft}" Foreground="#CFE0FF" Width="344"/>
                    <TextBlock Text="{Binding MonthlyIncome}" Style="{StaticResource InputRight}"/>
                </DockPanel>

                <DockPanel Grid.Row="3" LastChildFill="True" Margin="0,2">
                    <TextBlock Text="Udgifter:" Style="{StaticResource TitleLeft}" Foreground="#CFE0FF" Width="344"/>
                    <TextBlock Text="{Binding MonthlyExpenses}"  Style="{StaticResource InputRight}"/>
                </DockPanel>

                <DockPanel Grid.Row="4" LastChildFill="True" Margin="0,2">
                    <TextBlock Text="Difference:" Style="{StaticResource TitleLeft}" Foreground="#CFE0FF" Width="344"/>
                    <TextBlock Text="{Binding MonthlyDifference}" Style="{StaticResource InputRight}"/>
                </DockPanel>

                <DockPanel Grid.Row="5" LastChildFill="True" Margin="0,2">
                    <TextBlock Text="Udestående:" Style="{StaticResource TitleLeft}" Foreground="#CFE0FF" Width="344"/>
                    <TextBlock Text="{Binding TotalMonthlyOutstanding}" Style="{StaticResource InputRight}"/>
                </DockPanel>
            </Grid>
        </Border>

        <!-- GRID 2: Reol-tal -->
        <Border Grid.Row="1" Style="{StaticResource Card}" Margin="8">
            <Grid>
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="8"/>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                </Grid.RowDefinitions>

                <TextBlock Text="Reol-tal" Style="{StaticResource H2}" Foreground="#EAF2FF"/>

                <DockPanel Grid.Row="2" LastChildFill="True" Margin="0,2">
                    <TextBlock Text="Udlejede reoler:" Style="{StaticResource TitleLeft}" Foreground="#CFE0FF" Width="359"/>
                    <TextBlock Text="{Binding MonthlyRentedBooths}" Style="{StaticResource InputRight}"/>
                </DockPanel>

                <DockPanel Grid.Row="3" LastChildFill="True" Margin="0,2">
                    <TextBlock Text="Ledige reoler:" Style="{StaticResource TitleLeft}" Foreground="#CFE0FF" Width="359"/>
                    <TextBlock Text="{Binding MonthlyAvailableBooths}" Style="{StaticResource InputRight}"/>
                </DockPanel>

                <DockPanel Grid.Row="4" LastChildFill="True" Margin="0,2">
                    <TextBlock Text="Reol-leje indkomst:" Style="{StaticResource TitleLeft}" Foreground="#CFE0FF" Width="359"/>
                    <TextBlock Text="{Binding MonthlyRentIncome}" Style="{StaticResource InputRight}"/>
                </DockPanel>

                <DockPanel Grid.Row="5" LastChildFill="True" Margin="0,2">
                    <TextBlock Text="Kommission af salg:" Style="{StaticResource TitleLeft}" Foreground="#CFE0FF" Width="359"/>
                    <TextBlock Text="{Binding MonthlyComission}" Style="{StaticResource InputRight}"/>
                </DockPanel>
            </Grid>
        </Border>

        <!-- GRID 3: Salgs-tal -->
        <Border Grid.Row="2" Grid.ColumnSpan="1" Style="{StaticResource Card}" Margin="8">
            <Grid>
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="8"/>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                </Grid.RowDefinitions>

                <TextBlock Text="Salgs-tal" Style="{StaticResource H2}" Foreground="#EAF2FF"/>

                <DockPanel Grid.Row="2" LastChildFill="True" Margin="0,2">
                    <TextBlock Text="Solgt for:" Style="{StaticResource TitleLeft}" Foreground="#CFE0FF" Width="344"/>
                    <TextBlock Text="{Binding MonthlySalesTotal}" Style="{StaticResource InputRight}" Width="530"/>
                </DockPanel>

                <DockPanel Grid.Row="3" LastChildFill="True" Margin="0,2">
                    <TextBlock Text="Antal af salg:" Style="{StaticResource TitleLeft}" Foreground="#CFE0FF" Width="344"/>
                    <TextBlock Text="{Binding MonthlySalesAmount}" Style="{StaticResource InputRight}"/>
                </DockPanel>

                <DockPanel Grid.Row="4" LastChildFill="True" Margin="0,2">
                    <TextBlock Text="Kommission af salg:" Style="{StaticResource TitleLeft}" Foreground="#CFE0FF" Width="344" RenderTransformOrigin="0.5,0.5">
                    </TextBlock>
                    <TextBlock Text="{Binding MonthlyComission}" Style="{StaticResource InputRight}"/>
                </DockPanel>
            </Grid>
        </Border>

        <!-- GRID 4: Udestående Differencer (DataGrid uden headers) -->
        <Border Grid.Row="0" Grid.Column="1" Style="{StaticResource Card}" Margin="8,8,8,10" Grid.RowSpan="2">
            <Grid>
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="8"/>
                    <RowDefinition Height="Auto"/>
                </Grid.RowDefinitions>

                <TextBlock Text="Udestående Differencer"
                   Style="{StaticResource H2}"
                   Foreground="#EAF2FF" Width="442"/>

                <DataGrid Grid.Row="2"
                  Style="{StaticResource DataGridBase}"
                    HeadersVisibility="None"
                  ColumnHeaderHeight="0"
                  Width="442"
                  FontSize="30"
                  Padding="0"
                  CanUserResizeRows="False"
                  CanUserResizeColumns="False"
                  Background="Transparent"
                  RowBackground="Transparent"
                  BorderThickness="0"
                  AlternatingRowBackground="{x:Null}"
                  IsReadOnly="True"
                  SelectionMode="Extended"
                  ItemsSource="{Binding MonthlyOutstandingPayments}">

                    <!-- Kolonner: Navn + Beløb -->
                    <DataGrid.Columns>
                        <!-- Navn -->
                        <DataGridTextColumn Width="260" Binding="{Binding CustomerName}">
                            <DataGridTextColumn.ElementStyle>
                                <Style TargetType="TextBlock" BasedOn="{StaticResource LabelMuted}">
                                    <Setter Property="Foreground" Value="#EAF2FF"/>
                                    <Setter Property="VerticalAlignment" Value="Center"/>
                                    <Setter Property="TextAlignment" Value="Right"/>
                                    <Setter Property="FontSize"
                                    Value="{Binding FontSize, RelativeSource={RelativeSource AncestorType=DataGrid}}"/>
                                </Style>
                            </DataGridTextColumn.ElementStyle>
                        </DataGridTextColumn>

                        <!-- Beløb -->
                        <DataGridTextColumn Width="140" Binding="{Binding Outstanding, StringFormat=N2}">
                            <DataGridTextColumn.ElementStyle>
                                <Style TargetType="TextBlock">
                                    <Setter Property="Margin" Value="10,0,0,0"/>
                                    <Setter Property="Foreground" Value="{StaticResource Brush.Text}"/>
                                    <Setter Property="FontSize" Value="{Binding FontSize, RelativeSource={RelativeSource AncestorType=DataGrid}}"/>
                                    <Style.Triggers>
                                        <DataTrigger Binding="{Binding IsPositive}" Value="True">
                                            <Setter Property="Foreground" Value="#3DDC84"/>
                                        </DataTrigger>
                                        <DataTrigger Binding="{Binding IsNegative}" Value="True">
                                            <Setter Property="Foreground" Value="#FF6B6B"/>
                                        </DataTrigger>
                                    </Style.Triggers>
                                </Style>
                            </DataGridTextColumn.ElementStyle>
                        </DataGridTextColumn>
                    </DataGrid.Columns>
                </DataGrid>
            </Grid>
        </Border>


       

       
    </Grid>
</UserControl>
